<div class="page-width">
  <h1 class="title title--primary">{{ 'sections.cart.title' | t | default: 'Your Cart' }}</h1>

  <div class="cart-container" id="main-cart-items" data-id="{{ section.id }}">
    {%- if cart != empty -%}
      <form action="{{ routes.cart_url }}" class="cart__contents critical-hidden" method="post" id="cart">
        <div class="cart__items">
          {%- for item in cart.items -%}
            <div class="cart-item" id="CartItem-{{ item.index | plus: 1 }}">
              <div class="cart-item__media">
                {% if item.image %}
                  <img
                    src="{{ item.image | image_url: width: 300 }}"
                    alt="{{ item.image.alt | escape }}"
                    loading="lazy"
                    width="150"
                    height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                  >
                {% endif %}
              </div>

              <div class="cart-item__details">
                <a href="{{ item.url }}" class="cart-item__name h4 break">{{ item.product.title | escape }}</a>
                {%- if item.product.has_only_default_variant == false -%}
                  <dl>
                    {%- for option in item.options_with_values -%}
                      <div class="product-option">
                        <dt>{{ option.name }}:</dt>
                        <dd>{{ option.value }}</dd>
                      </div>
                    {%- endfor -%}
                  </dl>
                {%- endif -%}
                <div class="cart-item__price-wrapper">
                  <span class="price price--end">
                    {{ item.original_line_price | money }}
                  </span>
                </div>
              </div>

              <div class="cart-item__quantity">
                <div class="quantity">
                  <input
                    class="quantity__input"
                    type="number"
                    name="updates[]"
                    value="{{ item.quantity }}"
                    min="0"
                    aria-label="Quantity for {{ item.product.title | escape }}"
                    id="Quantity-{{ item.index | plus: 1 }}"
                    data-index="{{ item.index | plus: 1 }}"
                  >
                </div>
                <div class="cart-item__error" id="Line-item-error-{{ item.index | plus: 1 }}" role="alert">
                  <small class="cart-item__error-text"></small>
                </div>
              </div>
            </div>
          {%- endfor -%}
        </div>

        <div class="cart__footer">
          <div class="cart__blocks">
            <div class="js-contents">
              <div class="totals">
                <h3 class="totals__subtotal">Subtotal</h3>
                <p class="totals__subtotal-value">{{ cart.total_price | money_with_currency }}</p>
              </div>
              <small class="tax-note caption-large rte"> Taxes and shipping calculated at checkout </small>
            </div>
            <div class="cart__ctas">
              <button type="submit" id="checkout" class="cart__checkout-button button" name="checkout">
                Check out
              </button>
            </div>
          </div>
        </div>
      </form>
    {%- else -%}
      <div class="cart__warnings">
        <h1 class="cart__empty-text">Your cart is empty</h1>
        <a href="{{ routes.all_products_collection_url }}" class="button"> Continue shopping </a>
      </div>
    {%- endif -%}
  </div>
</div>

{% stylesheet %}
  .page-width {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }
  .cart-item {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 1.5rem 0;
    border-bottom: 1px solid #e5e5e5;
  }
  .cart-item__media img {
    width: 100px;
    height: auto;
    border-radius: 8px;
  }
  .cart-item__details {
    flex: 1;
  }
  .cart-item__name {
    font-weight: bold;
    text-decoration: none;
    color: inherit;
    font-size: 1.1rem;
  }
  .cart__footer {
    margin-top: 2rem;
    display: flex;
    justify-content: flex-end;
  }
  .cart__blocks {
    width: 100%;
    max-width: 400px;
  }
  .totals {
    display: flex;
    justify-content: space-between;
    font-size: 1.25rem;
    font-weight: bold;
    margin-bottom: 1rem;
  }
  .cart__checkout-button {
    width: 100%;
    padding: 1rem;
    background-color: #000;
    color: #fff;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
  }
  .cart__checkout-button:hover {
    background-color: #333;
  }
  .cart__warnings {
    text-align: center;
    padding: 4rem 0;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Cart",
  "settings": []
}
{% endschema %}
